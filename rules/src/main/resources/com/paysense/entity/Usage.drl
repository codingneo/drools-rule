package com.paysense.entity;

rule "Extract New Transaction"
	when
		TranObjectContainer(newTransaction.status.name == "INIT", $tran:newTransaction)
	then
		insert($tran);
end

rule "Usage Eligible"
    when	
        $tran : Transaction(user.numOfGoodTrans > 3 && user.totalSpend > 1000)
    then
        System.out.println( "inside Usage Eligible rule: "+$tran );
  
        $tran.setStatus(TransactionStatus.ELIGIBLE);
        
end

rule "Usage Review"
    when
        $tran : Transaction( status.name == "INIT" && (user.numOfGoodTrans <= 3 || user.totalSpend <= 1000))  
    then
        System.out.println( "inside Usage Review rule: "+$tran );
  
        $tran.setStatus(TransactionStatus.REVIEW);
end
